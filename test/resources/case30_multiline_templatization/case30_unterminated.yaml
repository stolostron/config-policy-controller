apiVersion: policy.open-cluster-management.io/v1
kind: ConfigurationPolicy
metadata:
  name: case30-configpolicy
spec:
  remediationAction: enforce
  namespaceSelector:
    exclude: ["kube-*"]
    include: ["default"]
  object-templates-raw:  |
    {{ range (lookup "v1" "ConfigMap" "default" "").items }}
    {{- if and .metadata.labels .metadata.labels.testcase (eq .metadata.labels.testcase "30") }}
      - complianceType: musthave
        objectDefinition:
          apiVersion: v1
          kind: ConfigMap
          metadata:
            name: '{{'
            namespace: default
          data:
            extraData: exists!
    {{- end }}
    {{ end }}
